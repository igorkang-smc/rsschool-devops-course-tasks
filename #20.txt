Started by an SCM change
Obtained Jenkinsfile from git https://github.com/igorkang-smc/rsschool-devops-course-tasks
[Pipeline] Start of Pipeline
[Pipeline] podTemplate
[Pipeline] {
[Pipeline] node
Created Pod: kubernetes jenkins/flask-cicd-demo-20-lhs3b-s1dwl-3smwk
[PodInfo] jenkins/flask-cicd-demo-20-lhs3b-s1dwl-3smwk
	Container [helm] waiting [ContainerCreating] No message
	Container [jnlp] waiting [ContainerCreating] No message
	Container [kaniko] waiting [ContainerCreating] No message
	Container [kubectl] waiting [ContainerCreating] No message
	Container [python] waiting [ContainerCreating] No message
	Container [sonar] waiting [ContainerCreating] No message
	Pod [Pending][ContainersNotReady] containers with unready status: [python kaniko helm kubectl sonar jnlp]
Agent flask-cicd-demo-20-lhs3b-s1dwl-3smwk is provisioned from template flask-cicd-demo_20-lhs3b-s1dwl
---
apiVersion: "v1"
kind: "Pod"
metadata:
  annotations:
    kubernetes.jenkins.io/last-refresh: "1753012089184"
    buildUrl: "http://jenkins.jenkins.svc.cluster.local:8080/job/flask-cicd-demo/20/"
    runUrl: "job/flask-cicd-demo/20/"
  labels:
    jenkins/jenkins-jenkins-agent: "true"
    jenkins/label-digest: "ddb98a4e17a754e7ee0d321ebf9d5db7cb652043"
    jenkins/label: "flask-cicd-demo_20-lhs3b"
    kubernetes.jenkins.io/controller: "http___jenkins_jenkins_svc_cluster_local_8080x"
  name: "flask-cicd-demo-20-lhs3b-s1dwl-3smwk"
  namespace: "jenkins"
spec:
  containers:
  - args:
    - "99d"
    command:
    - "sleep"
    image: "python:3.9-slim"
    name: "python"
    tty: true
    volumeMounts:
    - mountPath: "/home/jenkins/agent"
      name: "workspace-volume"
      readOnly: false
  - args:
    - "99d"
    command:
    - "sleep"
    image: "gcr.io/kaniko-project/executor:debug"
    imagePullPolicy: "Always"
    name: "kaniko"
    tty: true
    volumeMounts:
    - mountPath: "/kaniko/.docker"
      name: "docker-config"
    - mountPath: "/home/jenkins/agent"
      name: "workspace-volume"
      readOnly: false
  - args:
    - "99d"
    command:
    - "sleep"
    image: "alpine/helm:3.12.0"
    name: "helm"
    tty: true
    volumeMounts:
    - mountPath: "/home/jenkins/agent"
      name: "workspace-volume"
      readOnly: false
  - args:
    - "99d"
    command:
    - "sleep"
    image: "bitnami/kubectl:latest"
    name: "kubectl"
    tty: true
    volumeMounts:
    - mountPath: "/home/jenkins/agent"
      name: "workspace-volume"
      readOnly: false
  - args:
    - "99d"
    command:
    - "sleep"
    image: "sonarsource/sonar-scanner-cli:latest"
    name: "sonar"
    tty: true
    volumeMounts:
    - mountPath: "/home/jenkins/agent"
      name: "workspace-volume"
      readOnly: false
  - env:
    - name: "JENKINS_SECRET"
      value: "********"
    - name: "JENKINS_TUNNEL"
      value: "jenkins-agent.jenkins.svc.cluster.local:50000"
    - name: "JENKINS_AGENT_NAME"
      value: "flask-cicd-demo-20-lhs3b-s1dwl-3smwk"
    - name: "REMOTING_OPTS"
      value: "-noReconnectAfter 1d"
    - name: "JENKINS_NAME"
      value: "flask-cicd-demo-20-lhs3b-s1dwl-3smwk"
    - name: "JENKINS_AGENT_WORKDIR"
      value: "/home/jenkins/agent"
    - name: "JENKINS_URL"
      value: "http://jenkins.jenkins.svc.cluster.local:8080/"
    image: "jenkins/inbound-agent:3309.v27b_9314fd1a_4-1"
    name: "jnlp"
    resources:
      requests:
        memory: "256Mi"
        cpu: "100m"
    volumeMounts:
    - mountPath: "/home/jenkins/agent"
      name: "workspace-volume"
      readOnly: false
  nodeSelector:
    kubernetes.io/os: "linux"
  restartPolicy: "Never"
  volumes:
  - name: "docker-config"
    secret:
      items:
      - key: ".dockerconfigjson"
        path: "config.json"
      secretName: "docker-registry-secret"
  - emptyDir:
      medium: ""
    name: "workspace-volume"

Running on flask-cicd-demo-20-lhs3b-s1dwl-3smwk in /home/jenkins/agent/workspace/flask-cicd-demo
[Pipeline] {
[Pipeline] stage
[Pipeline] { (Declarative: Checkout SCM)
[Pipeline] checkout
Selected Git installation does not exist. Using Default
The recommended git tool is: NONE
No credentials specified
Cloning the remote Git repository
Cloning repository https://github.com/igorkang-smc/rsschool-devops-course-tasks
 > git init /home/jenkins/agent/workspace/flask-cicd-demo # timeout=10
Fetching upstream changes from https://github.com/igorkang-smc/rsschool-devops-course-tasks
 > git --version # timeout=10
 > git --version # 'git version 2.39.5'
 > git fetch --tags --force --progress -- https://github.com/igorkang-smc/rsschool-devops-course-tasks +refs/heads/*:refs/remotes/origin/* # timeout=10
Avoid second fetch
Checking out Revision d64b5d117a6110b072a97197b08a8571a0314939 (refs/remotes/origin/task_6)
Commit message: "rsschool-devops-task_6"
 > git config remote.origin.url https://github.com/igorkang-smc/rsschool-devops-course-tasks # timeout=10
 > git config --add remote.origin.fetch +refs/heads/*:refs/remotes/origin/* # timeout=10
 > git rev-parse refs/remotes/origin/task_6^{commit} # timeout=10
 > git config core.sparsecheckout # timeout=10
 > git checkout -f d64b5d117a6110b072a97197b08a8571a0314939 # timeout=10
 > git rev-list --no-walk 90288e19e98962ccef8f04e5833e5553226f3673 # timeout=10
[Pipeline] }
[Pipeline] // stage
[Pipeline] withEnv
[Pipeline] {
[Pipeline] withEnv
[Pipeline] {
[Pipeline] timeout
Timeout set to expire in 30 min
[Pipeline] {
[Pipeline] timestamps
[Pipeline] {
[Pipeline] ansiColor
[Pipeline] {
[2025-07-20T11:48:20.085Z] 
[Pipeline] stage
[Pipeline] { (Checkout)
[Pipeline] checkout
[2025-07-20T11:48:20.112Z] Selected Git installation does not exist. Using Default
[2025-07-20T11:48:20.112Z] The recommended git tool is: NONE
[2025-07-20T11:48:20.120Z] No credentials specified
[2025-07-20T11:48:20.122Z] Fetching changes from the remote Git repository
[2025-07-20T11:48:20.678Z] Checking out Revision d64b5d117a6110b072a97197b08a8571a0314939 (refs/remotes/origin/task_6)
[2025-07-20T11:48:20.693Z] Commit message: "rsschool-devops-task_6"
[Pipeline] script
[Pipeline] {
[Pipeline] sh
[2025-07-20T11:48:21.046Z] + git rev-parse --short HEAD
[Pipeline] sh
[2025-07-20T11:48:20.120Z]  > git rev-parse --resolve-git-dir /home/jenkins/agent/workspace/flask-cicd-demo/.git # timeout=10
[2025-07-20T11:48:20.124Z]  > git config remote.origin.url https://github.com/igorkang-smc/rsschool-devops-course-tasks # timeout=10
[2025-07-20T11:48:20.128Z] Fetching upstream changes from https://github.com/igorkang-smc/rsschool-devops-course-tasks
[2025-07-20T11:48:20.128Z]  > git --version # timeout=10
[2025-07-20T11:48:20.129Z]  > git --version # 'git version 2.39.5'
[2025-07-20T11:48:20.130Z]  > git fetch --tags --force --progress -- https://github.com/igorkang-smc/rsschool-devops-course-tasks +refs/heads/*:refs/remotes/origin/* # timeout=10
[2025-07-20T11:48:20.671Z]  > git rev-parse refs/remotes/origin/task_6^{commit} # timeout=10
[2025-07-20T11:48:20.679Z]  > git config core.sparsecheckout # timeout=10
[2025-07-20T11:48:20.682Z]  > git checkout -f d64b5d117a6110b072a97197b08a8571a0314939 # timeout=10
[2025-07-20T11:48:21.330Z] + date -u +%Y-%m-%dT%H:%M:%SZ
[Pipeline] }
[Pipeline] // script
[Pipeline] }
[Pipeline] // stage
[Pipeline] stage
[Pipeline] { (Application Build)
[Pipeline] container
[Pipeline] {
[Pipeline] sh
[2025-07-20T11:48:21.898Z] + echo Installing dependencies...
[2025-07-20T11:48:21.898Z] Installing dependencies...
[2025-07-20T11:48:21.898Z] + pip install --no-cache-dir -r requirements.txt
[2025-07-20T11:48:22.821Z] Collecting Flask==2.3.3
[2025-07-20T11:48:22.821Z]   Downloading flask-2.3.3-py3-none-any.whl (96 kB)
[2025-07-20T11:48:22.821Z]      â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” 96.1/96.1 kB 10.5 MB/s eta 0:00:00
[2025-07-20T11:48:22.821Z] Collecting Werkzeug==2.3.7
[2025-07-20T11:48:22.821Z]   Downloading werkzeug-2.3.7-py3-none-any.whl (242 kB)
[2025-07-20T11:48:23.077Z]      â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” 242.2/242.2 kB 15.5 MB/s eta 0:00:00
[2025-07-20T11:48:23.077Z] Collecting pytest==7.4.2
[2025-07-20T11:48:23.077Z]   Downloading pytest-7.4.2-py3-none-any.whl (324 kB)
[2025-07-20T11:48:23.077Z]      â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” 324.5/324.5 kB 17.4 MB/s eta 0:00:00
[2025-07-20T11:48:23.077Z] Collecting pytest-flask==1.2.0
[2025-07-20T11:48:23.077Z]   Downloading pytest_flask-1.2.0-py3-none-any.whl (10 kB)
[2025-07-20T11:48:23.077Z] Collecting pytest-cov==4.1.0
[2025-07-20T11:48:23.077Z]   Downloading pytest_cov-4.1.0-py3-none-any.whl (21 kB)
[2025-07-20T11:48:23.077Z] Collecting requests==2.31.0
[2025-07-20T11:48:23.077Z]   Downloading requests-2.31.0-py3-none-any.whl (62 kB)
[2025-07-20T11:48:23.077Z]      â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” 62.6/62.6 kB 66.8 MB/s eta 0:00:00
[2025-07-20T11:48:23.077Z] Collecting click>=8.1.3
[2025-07-20T11:48:23.077Z]   Downloading click-8.1.8-py3-none-any.whl (98 kB)
[2025-07-20T11:48:23.077Z]      â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” 98.2/98.2 kB 39.6 MB/s eta 0:00:00
[2025-07-20T11:48:23.077Z] Collecting blinker>=1.6.2
[2025-07-20T11:48:23.077Z]   Downloading blinker-1.9.0-py3-none-any.whl (8.5 kB)
[2025-07-20T11:48:23.077Z] Collecting Jinja2>=3.1.2
[2025-07-20T11:48:23.077Z]   Downloading jinja2-3.1.6-py3-none-any.whl (134 kB)
[2025-07-20T11:48:23.077Z]      â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” 134.9/134.9 kB 22.7 MB/s eta 0:00:00
[2025-07-20T11:48:23.330Z] Collecting importlib-metadata>=3.6.0
[2025-07-20T11:48:23.330Z]   Downloading importlib_metadata-8.7.0-py3-none-any.whl (27 kB)
[2025-07-20T11:48:23.330Z] Collecting itsdangerous>=2.1.2
[2025-07-20T11:48:23.330Z]   Downloading itsdangerous-2.2.0-py3-none-any.whl (16 kB)
[2025-07-20T11:48:23.330Z] Collecting MarkupSafe>=2.1.1
[2025-07-20T11:48:23.330Z]   Downloading MarkupSafe-3.0.2-cp39-cp39-manylinux_2_17_aarch64.manylinux2014_aarch64.whl (21 kB)
[2025-07-20T11:48:23.330Z] Collecting exceptiongroup>=1.0.0rc8
[2025-07-20T11:48:23.330Z]   Downloading exceptiongroup-1.3.0-py3-none-any.whl (16 kB)
[2025-07-20T11:48:23.330Z] Collecting tomli>=1.0.0
[2025-07-20T11:48:23.330Z]   Downloading tomli-2.2.1-py3-none-any.whl (14 kB)
[2025-07-20T11:48:23.330Z] Collecting iniconfig
[2025-07-20T11:48:23.330Z]   Downloading iniconfig-2.1.0-py3-none-any.whl (6.0 kB)
[2025-07-20T11:48:23.330Z] Collecting pluggy<2.0,>=0.12
[2025-07-20T11:48:23.330Z]   Downloading pluggy-1.6.0-py3-none-any.whl (20 kB)
[2025-07-20T11:48:23.330Z] Collecting packaging
[2025-07-20T11:48:23.330Z]   Downloading packaging-25.0-py3-none-any.whl (66 kB)
[2025-07-20T11:48:23.330Z]      â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” 66.5/66.5 kB 24.2 MB/s eta 0:00:00
[2025-07-20T11:48:23.895Z] Collecting coverage[toml]>=5.2.1
[2025-07-20T11:48:23.895Z]   Downloading coverage-7.9.2-cp39-cp39-manylinux_2_17_aarch64.manylinux2014_aarch64.whl (241 kB)
[2025-07-20T11:48:23.895Z]      â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” 241.2/241.2 kB 21.2 MB/s eta 0:00:00
[2025-07-20T11:48:23.895Z] Collecting certifi>=2017.4.17
[2025-07-20T11:48:23.895Z]   Downloading certifi-2025.7.14-py3-none-any.whl (162 kB)
[2025-07-20T11:48:23.895Z]      â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” 162.7/162.7 kB 26.7 MB/s eta 0:00:00
[2025-07-20T11:48:23.895Z] Collecting urllib3<3,>=1.21.1
[2025-07-20T11:48:23.895Z]   Downloading urllib3-2.5.0-py3-none-any.whl (129 kB)
[2025-07-20T11:48:23.895Z]      â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” 129.8/129.8 kB 28.4 MB/s eta 0:00:00
[2025-07-20T11:48:23.895Z] Collecting idna<4,>=2.5
[2025-07-20T11:48:23.895Z]   Downloading idna-3.10-py3-none-any.whl (70 kB)
[2025-07-20T11:48:23.895Z]      â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” 70.4/70.4 kB 39.7 MB/s eta 0:00:00
[2025-07-20T11:48:23.895Z] Collecting charset-normalizer<4,>=2
[2025-07-20T11:48:23.895Z]   Downloading charset_normalizer-3.4.2-cp39-cp39-manylinux_2_17_aarch64.manylinux2014_aarch64.whl (144 kB)
[2025-07-20T11:48:23.895Z]      â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” 144.7/144.7 kB 17.6 MB/s eta 0:00:00
[2025-07-20T11:48:24.148Z] Collecting typing-extensions>=4.6.0
[2025-07-20T11:48:24.148Z]   Downloading typing_extensions-4.14.1-py3-none-any.whl (43 kB)
[2025-07-20T11:48:24.148Z]      â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” 43.9/43.9 kB 545.9 MB/s eta 0:00:00
[2025-07-20T11:48:24.148Z] Collecting zipp>=3.20
[2025-07-20T11:48:24.148Z]   Downloading zipp-3.23.0-py3-none-any.whl (10 kB)
[2025-07-20T11:48:24.148Z] Installing collected packages: zipp, urllib3, typing-extensions, tomli, pluggy, packaging, MarkupSafe, itsdangerous, iniconfig, idna, coverage, click, charset-normalizer, certifi, blinker, Werkzeug, requests, Jinja2, importlib-metadata, exceptiongroup, pytest, Flask, pytest-flask, pytest-cov
[2025-07-20T11:48:24.705Z] Successfully installed Flask-2.3.3 Jinja2-3.1.6 MarkupSafe-3.0.2 Werkzeug-2.3.7 blinker-1.9.0 certifi-2025.7.14 charset-normalizer-3.4.2 click-8.1.8 coverage-7.9.2 exceptiongroup-1.3.0 idna-3.10 importlib-metadata-8.7.0 iniconfig-2.1.0 itsdangerous-2.2.0 packaging-25.0 pluggy-1.6.0 pytest-7.4.2 pytest-cov-4.1.0 pytest-flask-1.2.0 requests-2.31.0 tomli-2.2.1 typing-extensions-4.14.1 urllib3-2.5.0 zipp-3.23.0
[2025-07-20T11:48:24.705Z] WARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager. It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv
[2025-07-20T11:48:24.705Z] 
[2025-07-20T11:48:24.705Z] [notice] A new release of pip is available: 23.0.1 -> 25.1.1
[2025-07-20T11:48:24.705Z] [notice] To update, run: pip install --upgrade pip
[2025-07-20T11:48:24.705Z] + echo Checking Python syntax...
[2025-07-20T11:48:24.705Z] Checking Python syntax...
[2025-07-20T11:48:24.705Z] + python -m py_compile app.py
[2025-07-20T11:48:24.705Z] + echo Build completed successfully!
[2025-07-20T11:48:24.705Z] Build completed successfully!
[Pipeline] }
[Pipeline] // container
[Pipeline] }
[Pipeline] // stage
[Pipeline] stage
[Pipeline] { (Unit Tests)
[Pipeline] container
[Pipeline] {
[Pipeline] sh
[2025-07-20T11:48:25.259Z] + echo Running unit tests with coverage...
[2025-07-20T11:48:25.259Z] Running unit tests with coverage...
[2025-07-20T11:48:25.259Z] + python -m pytest tests/ -v --junitxml=test-results.xml --cov=app --cov-report=xml --cov-report=html
[2025-07-20T11:48:25.259Z] ============================= test session starts ==============================
[2025-07-20T11:48:25.259Z] platform linux -- Python 3.9.23, pytest-7.4.2, pluggy-1.6.0 -- /usr/local/bin/python
[2025-07-20T11:48:25.259Z] cachedir: .pytest_cache
[2025-07-20T11:48:25.259Z] rootdir: /home/jenkins/agent/workspace/flask-cicd-demo
[2025-07-20T11:48:25.259Z] configfile: pytest.ini
[2025-07-20T11:48:25.259Z] plugins: flask-1.2.0, cov-4.1.0
[2025-07-20T11:48:25.259Z] collecting ... collected 10 items
[2025-07-20T11:48:25.259Z] 
[2025-07-20T11:48:25.259Z] tests/test_app.py::TestFlaskApp::test_index_page PASSED                  [ 10%]
[2025-07-20T11:48:25.259Z] tests/test_app.py::TestFlaskApp::test_health_endpoint PASSED             [ 20%]
[2025-07-20T11:48:25.259Z] tests/test_app.py::TestFlaskApp::test_api_status_endpoint PASSED         [ 30%]
[2025-07-20T11:48:25.519Z] tests/test_app.py::TestFlaskApp::test_api_info_endpoint PASSED           [ 40%]
[2025-07-20T11:48:25.519Z] tests/test_app.py::TestFlaskApp::test_404_error_handler PASSED           [ 50%]
[2025-07-20T11:48:25.519Z] tests/test_app.py::TestFlaskApp::test_health_endpoint_structure PASSED   [ 60%]
[2025-07-20T11:48:25.519Z] tests/test_app.py::TestFlaskApp::test_api_endpoints_return_json PASSED   [ 70%]
[2025-07-20T11:48:25.519Z] tests/test_app.py::TestFlaskApp::test_environment_variables PASSED       [ 80%]
[2025-07-20T11:48:25.519Z] tests/test_app.py::TestFlaskApp::test_main_page_contains_endpoints_info PASSED [ 90%]
[2025-07-20T11:48:25.519Z] tests/test_app.py::TestFlaskApp::test_cors_headers PASSED                [100%]
[2025-07-20T11:48:25.519Z] 
[2025-07-20T11:48:25.519Z] - generated xml file: /home/jenkins/agent/workspace/flask-cicd-demo/test-results.xml -
[2025-07-20T11:48:25.519Z] 
[2025-07-20T11:48:25.519Z] ---------- coverage: platform linux, python 3.9.23-final-0 -----------
[2025-07-20T11:48:25.519Z] Coverage HTML written to dir htmlcov
[2025-07-20T11:48:25.519Z] Coverage XML written to file coverage.xml
[2025-07-20T11:48:25.519Z] 
[2025-07-20T11:48:25.519Z] ============================== 10 passed in 0.06s ==============================
[2025-07-20T11:48:25.519Z] + echo Tests completed!
[2025-07-20T11:48:25.519Z] Tests completed!
[Pipeline] }
[Pipeline] // container
[Pipeline] junit
[2025-07-20T11:48:25.571Z] Recording test results
[2025-07-20T11:48:25.732Z] [Checks API] No suitable checks publisher found.
[Pipeline] publishHTML
[2025-07-20T11:48:25.741Z] [htmlpublisher] Archiving HTML reports...
[2025-07-20T11:48:25.742Z] [htmlpublisher] Archiving at BUILD level /home/jenkins/agent/workspace/flask-cicd-demo/htmlcov to Coverage_20Report
[2025-07-20T11:48:25.744Z] [htmlpublisher] Copying recursive using current thread
[Pipeline] }
[Pipeline] // stage
[Pipeline] stage
[Pipeline] { (Code Quality - SonarQube)
[Pipeline] container
[Pipeline] {
[Pipeline] withSonarQubeEnv
[2025-07-20T11:48:25.885Z] Injecting SonarQube environment variables using the configuration: SonarQube
[Pipeline] {
[Pipeline] sh
[2025-07-20T11:48:26.388Z] + sonar-scanner -Dsonar.projectKey=flask-cicd-demo '-Dsonar.projectName=Flask CI/CD Demo' -Dsonar.projectVersion=20 -Dsonar.sources=. '-Dsonar.exclusions=tests/**,htmlcov/**,venv/**,helm/**,.git/**' -Dsonar.python.version=3.9 -Dsonar.python.coverage.reportPaths=coverage.xml -Dsonar.python.xunit.reportPath=test-results.xml
[2025-07-20T11:48:27.314Z] 11:48:27.110 INFO  Scanner configuration file: /opt/sonar-scanner/conf/sonar-scanner.properties
[2025-07-20T11:48:27.314Z] 11:48:27.116 INFO  Project root configuration file: /home/jenkins/agent/workspace/flask-cicd-demo/sonar-project.properties
[2025-07-20T11:48:27.314Z] 11:48:27.144 INFO  SonarScanner CLI 7.1.0.4889
[2025-07-20T11:48:27.314Z] 11:48:27.152 INFO  Java 17.0.14 Amazon.com Inc. (64-bit)
[2025-07-20T11:48:27.314Z] 11:48:27.153 INFO  Linux 6.14.10-orbstack-00291-g1b252bd3edea amd64
[2025-07-20T11:48:27.314Z] 11:48:27.203 INFO  User cache: /opt/sonar-scanner/.sonar/cache
[2025-07-20T11:48:28.680Z] 11:48:28.552 INFO  Communicating with SonarQube Community Build 25.5.0.107428
[2025-07-20T11:48:28.680Z] 11:48:28.553 INFO  JRE provisioning: os[linux], arch[x86_64]
[2025-07-20T11:48:31.202Z] 11:48:30.908 INFO  Starting SonarScanner Engine...
[2025-07-20T11:48:31.202Z] 11:48:30.908 INFO  Java 17.0.13 Eclipse Adoptium (64-bit)
[2025-07-20T11:48:33.081Z] 11:48:32.656 INFO  Load global settings
[2025-07-20T11:48:33.081Z] 11:48:32.751 INFO  Load global settings (done) | time=95ms
[2025-07-20T11:48:33.081Z] 11:48:32.755 INFO  Server id: EA8D9556-AZgnEobLetdPckFFRpHF
[2025-07-20T11:48:33.081Z] 11:48:32.811 INFO  Loading required plugins
[2025-07-20T11:48:33.081Z] 11:48:32.812 INFO  Load plugins index
[2025-07-20T11:48:33.081Z] 11:48:32.843 INFO  Load plugins index (done) | time=30ms
[2025-07-20T11:48:33.081Z] 11:48:32.843 INFO  Load/download plugins
[2025-07-20T11:48:33.644Z] 11:48:33.422 INFO  Load/download plugins (done) | time=578ms
[2025-07-20T11:48:33.900Z] 11:48:33.837 INFO  Process project properties
[2025-07-20T11:48:33.900Z] 11:48:33.849 INFO  Process project properties (done) | time=12ms
[2025-07-20T11:48:33.900Z] 11:48:33.861 INFO  Project key: flask-cicd-demo
[2025-07-20T11:48:33.900Z] 11:48:33.863 INFO  Base dir: /home/jenkins/agent/workspace/flask-cicd-demo
[2025-07-20T11:48:33.900Z] 11:48:33.863 INFO  Working dir: /home/jenkins/agent/workspace/flask-cicd-demo/.scannerwork
[2025-07-20T11:48:33.900Z] 11:48:33.877 INFO  Load project settings for component key: 'flask-cicd-demo'
[2025-07-20T11:48:34.154Z] 11:48:33.906 INFO  Load project settings for component key: 'flask-cicd-demo' (done) | time=26ms
[2025-07-20T11:48:34.154Z] 11:48:33.939 INFO  Load quality profiles
[2025-07-20T11:48:34.154Z] 11:48:34.039 INFO  Load quality profiles (done) | time=99ms
[2025-07-20T11:48:34.154Z] 11:48:34.054 INFO  Auto-configuring with CI 'Jenkins'
[2025-07-20T11:48:34.154Z] 11:48:34.080 INFO  Load active rules
[2025-07-20T11:48:34.737Z] 11:48:34.458 INFO  Load active rules (done) | time=377ms
[2025-07-20T11:48:34.737Z] 11:48:34.480 INFO  Load analysis cache
[2025-07-20T11:48:34.737Z] 11:48:34.521 INFO  Load analysis cache (4.2 kB) | time=40ms
[2025-07-20T11:48:34.737Z] 11:48:34.619 INFO  Preprocessing files...
[2025-07-20T11:48:35.003Z] 11:48:34.847 INFO  3 languages detected in 13 preprocessed files
[2025-07-20T11:48:35.003Z] 11:48:34.848 INFO  22 files ignored because of inclusion/exclusion patterns
[2025-07-20T11:48:35.003Z] 11:48:34.849 INFO  3 files ignored because of scm ignore settings
[2025-07-20T11:48:35.003Z] 11:48:34.856 INFO  Loading plugins for detected languages
[2025-07-20T11:48:35.003Z] 11:48:34.857 INFO  Load/download plugins
[2025-07-20T11:48:35.941Z] 11:48:35.723 INFO  Load/download plugins (done) | time=865ms
[2025-07-20T11:48:36.198Z] 11:48:36.099 INFO  Load project repositories
[2025-07-20T11:48:36.198Z] 11:48:36.179 INFO  Load project repositories (done) | time=81ms
[2025-07-20T11:48:36.456Z] 11:48:36.221 INFO  Indexing files...
[2025-07-20T11:48:36.456Z] 11:48:36.221 INFO  Project configuration:
[2025-07-20T11:48:36.456Z] 11:48:36.225 INFO    Excluded sources: tests/**, htmlcov/**, venv/**, helm/**, .git/**
[2025-07-20T11:48:36.456Z] 11:48:36.254 INFO  13 files indexed
[2025-07-20T11:48:36.456Z] 11:48:36.255 INFO  Quality profile for docker: Sonar way
[2025-07-20T11:48:36.456Z] 11:48:36.255 INFO  Quality profile for py: Sonar way
[2025-07-20T11:48:36.456Z] 11:48:36.255 INFO  Quality profile for yaml: Sonar way
[2025-07-20T11:48:36.456Z] 11:48:36.255 INFO  ------------- Run sensors on module Flask CI/CD Demo
[2025-07-20T11:48:36.456Z] 11:48:36.329 INFO  Load metrics repository
[2025-07-20T11:48:36.456Z] 11:48:36.368 INFO  Load metrics repository (done) | time=35ms
[2025-07-20T11:48:37.386Z] 11:48:37.116 INFO  Sensor JaCoCo XML Report Importer [jacoco]
[2025-07-20T11:48:37.386Z] 11:48:37.119 INFO  'sonar.coverage.jacoco.xmlReportPaths' is not defined. Using default locations: target/site/jacoco/jacoco.xml,target/site/jacoco-it/jacoco.xml,build/reports/jacoco/test/jacocoTestReport.xml
[2025-07-20T11:48:37.386Z] 11:48:37.121 INFO  No report imported, no coverage information will be imported by JaCoCo XML Report Importer
[2025-07-20T11:48:37.386Z] 11:48:37.122 INFO  Sensor JaCoCo XML Report Importer [jacoco] (done) | time=5ms
[2025-07-20T11:48:37.386Z] 11:48:37.122 INFO  Sensor IaC CloudFormation Sensor [iac]
[2025-07-20T11:48:37.386Z] 11:48:37.183 INFO  0 source files to be analyzed
[2025-07-20T11:48:37.386Z] 11:48:37.194 INFO  0/0 source files have been analyzed
[2025-07-20T11:48:37.386Z] 11:48:37.194 INFO  Sensor IaC CloudFormation Sensor [iac] (done) | time=75ms
[2025-07-20T11:48:37.386Z] 11:48:37.194 INFO  Sensor IaC Kubernetes Sensor [iac]
[2025-07-20T11:48:37.386Z] 11:48:37.278 INFO  2 source files to be parsed
[2025-07-20T11:48:37.386Z] 11:48:37.323 INFO  2/2 source files have been parsed
[2025-07-20T11:48:37.386Z] 11:48:37.324 INFO  2 source files to be analyzed
[2025-07-20T11:48:37.646Z] 11:48:37.427 INFO  2/2 source files have been analyzed
[2025-07-20T11:48:37.646Z] 11:48:37.428 INFO  2 source files to be checked
[2025-07-20T11:48:37.646Z] 11:48:37.450 INFO  2/2 source files have been checked
[2025-07-20T11:48:37.646Z] 11:48:37.452 INFO  Sensor IaC Kubernetes Sensor [iac] (done) | time=257ms
[2025-07-20T11:48:37.646Z] 11:48:37.454 INFO  Sensor Java Config Sensor [iac]
[2025-07-20T11:48:37.646Z] 11:48:37.461 INFO  0 source files to be analyzed
[2025-07-20T11:48:37.646Z] 11:48:37.463 INFO  0/0 source files have been analyzed
[2025-07-20T11:48:37.646Z] 11:48:37.463 INFO  Sensor Java Config Sensor [iac] (done) | time=10ms
[2025-07-20T11:48:37.646Z] 11:48:37.463 INFO  Sensor Python Sensor [python]
[2025-07-20T11:48:37.646Z] 11:48:37.476 INFO  Starting global symbols computation
[2025-07-20T11:48:37.646Z] 11:48:37.476 INFO  1 source file to be analyzed
[2025-07-20T11:48:38.205Z] 11:48:38.005 INFO  1/1 source file has been analyzed
[2025-07-20T11:48:38.205Z] 11:48:38.019 INFO  Starting rules execution
[2025-07-20T11:48:38.205Z] 11:48:38.020 INFO  1 source file to be analyzed
[2025-07-20T11:48:38.765Z] 11:48:38.677 INFO  1/1 source file has been analyzed
[2025-07-20T11:48:38.765Z] 11:48:38.679 INFO  The Python analyzer was able to leverage cached data from previous analyses for 0 out of 1 files. These files were not parsed.
[2025-07-20T11:48:38.765Z] 11:48:38.679 INFO  Sensor Python Sensor [python] (done) | time=1215ms
[2025-07-20T11:48:38.765Z] 11:48:38.679 INFO  Sensor Cobertura Sensor for Python coverage [python]
[2025-07-20T11:48:38.765Z] 11:48:38.688 INFO  Python test coverage
[2025-07-20T11:48:38.765Z] 11:48:38.692 INFO  Parsing report '/home/jenkins/agent/workspace/flask-cicd-demo/coverage.xml'
[2025-07-20T11:48:38.765Z] 11:48:38.722 INFO  Sensor Cobertura Sensor for Python coverage [python] (done) | time=46ms
[2025-07-20T11:48:38.765Z] 11:48:38.724 INFO  Sensor PythonXUnitSensor [python]
[2025-07-20T11:48:38.765Z] 11:48:38.728 INFO  Processing report '/home/jenkins/agent/workspace/flask-cicd-demo/test-results.xml'
[2025-07-20T11:48:38.765Z] 11:48:38.731 WARN  The resource for 'tests.test_app.TestFlaskApp' is not found, drilling down to the details of this test won't be possible
[2025-07-20T11:48:38.765Z] 11:48:38.732 WARN  The resource for 'tests.test_app.TestFlaskApp' is not found, drilling down to the details of this test won't be possible
[2025-07-20T11:48:38.765Z] 11:48:38.734 WARN  The resource for 'tests.test_app.TestFlaskApp' is not found, drilling down to the details of this test won't be possible
[2025-07-20T11:48:38.765Z] 11:48:38.735 WARN  The resource for 'tests.test_app.TestFlaskApp' is not found, drilling down to the details of this test won't be possible
[2025-07-20T11:48:38.765Z] 11:48:38.737 WARN  The resource for 'tests.test_app.TestFlaskApp' is not found, drilling down to the details of this test won't be possible
[2025-07-20T11:48:38.765Z] 11:48:38.737 WARN  The resource for 'tests.test_app.TestFlaskApp' is not found, drilling down to the details of this test won't be possible
[2025-07-20T11:48:38.765Z] 11:48:38.738 WARN  The resource for 'tests.test_app.TestFlaskApp' is not found, drilling down to the details of this test won't be possible
[2025-07-20T11:48:38.765Z] 11:48:38.738 WARN  The resource for 'tests.test_app.TestFlaskApp' is not found, drilling down to the details of this test won't be possible
[2025-07-20T11:48:38.765Z] 11:48:38.738 WARN  The resource for 'tests.test_app.TestFlaskApp' is not found, drilling down to the details of this test won't be possible
[2025-07-20T11:48:38.765Z] 11:48:38.739 WARN  The resource for 'tests.test_app.TestFlaskApp' is not found, drilling down to the details of this test won't be possible
[2025-07-20T11:48:38.765Z] 11:48:38.739 INFO  Sensor PythonXUnitSensor [python] (done) | time=9ms
[2025-07-20T11:48:38.765Z] 11:48:38.739 INFO  Sensor Python Dependency Sensor [python]
[2025-07-20T11:48:38.765Z] 11:48:38.740 INFO  Sensor Python Dependency Sensor [python] (done) | time=8ms
[2025-07-20T11:48:38.765Z] 11:48:38.743 INFO  Sensor JavaScript inside YAML analysis [javascript]
[2025-07-20T11:48:39.026Z] 11:48:38.766 INFO  No input files found for analysis
[2025-07-20T11:48:39.026Z] 11:48:38.766 INFO  Hit the cache for 0 out of 0
[2025-07-20T11:48:39.026Z] 11:48:38.768 INFO  Miss the cache for 0 out of 0
[2025-07-20T11:48:39.026Z] 11:48:38.768 INFO  Sensor JavaScript inside YAML analysis [javascript] (done) | time=28ms
[2025-07-20T11:48:39.026Z] 11:48:38.768 INFO  Sensor CSS Rules [javascript]
[2025-07-20T11:48:39.026Z] 11:48:38.769 INFO  No CSS, PHP, HTML or VueJS files are found in the project. CSS analysis is skipped.
[2025-07-20T11:48:39.026Z] 11:48:38.769 INFO  Sensor CSS Rules [javascript] (done) | time=0ms
[2025-07-20T11:48:39.026Z] 11:48:38.769 INFO  Sensor IaC Docker Sensor [iac]
[2025-07-20T11:48:39.026Z] 11:48:38.881 INFO  1 source file to be analyzed
[2025-07-20T11:48:39.026Z] 11:48:39.012 INFO  1/1 source file has been analyzed
[2025-07-20T11:48:39.026Z] 11:48:39.013 INFO  Sensor IaC Docker Sensor [iac] (done) | time=244ms
[2025-07-20T11:48:39.026Z] 11:48:39.016 INFO  Sensor TextAndSecretsSensor [text]
[2025-07-20T11:48:39.026Z] 11:48:39.016 INFO  Available processors: 8
[2025-07-20T11:48:39.026Z] 11:48:39.017 INFO  Using 8 threads for analysis.
[2025-07-20T11:48:39.586Z] 11:48:39.524 INFO  The property "sonar.tests" is not set. To improve the analysis accuracy, we categorize a file as a test file if any of the following is true:
[2025-07-20T11:48:39.586Z]   * The filename starts with "test"
[2025-07-20T11:48:39.586Z]   * The filename contains "test." or "tests."
[2025-07-20T11:48:39.586Z]   * Any directory in the file path is named: "doc", "docs", "test" or "tests"
[2025-07-20T11:48:39.586Z]   * Any directory in the file path has a name ending in "test" or "tests"
[2025-07-20T11:48:39.586Z] 
[2025-07-20T11:48:39.586Z] 11:48:39.585 INFO  Using git CLI to retrieve untracked files
[2025-07-20T11:48:39.840Z] 11:48:39.650 INFO  Analyzing language associated files and files included via "sonar.text.inclusions" that are tracked by git
[2025-07-20T11:48:39.840Z] 11:48:39.730 INFO  9 source files to be analyzed
[2025-07-20T11:48:40.097Z] 11:48:40.010 INFO  9/9 source files have been analyzed
[2025-07-20T11:48:40.097Z] 11:48:40.012 INFO  Sensor TextAndSecretsSensor [text] (done) | time=999ms
[2025-07-20T11:48:40.097Z] 11:48:40.022 INFO  ------------- Run sensors on project
[2025-07-20T11:48:40.357Z] 11:48:40.143 INFO  Sensor Zero Coverage Sensor
[2025-07-20T11:48:40.357Z] 11:48:40.147 INFO  Sensor Zero Coverage Sensor (done) | time=1ms
[2025-07-20T11:48:40.357Z] 11:48:40.148 INFO  ------------- Gather SCA dependencies on project
[2025-07-20T11:48:40.357Z] 11:48:40.148 INFO  Dependency analysis skipped
[2025-07-20T11:48:40.357Z] 11:48:40.151 INFO  SCM Publisher SCM provider for this project is: git
[2025-07-20T11:48:40.357Z] 11:48:40.153 INFO  SCM Publisher 1 source file to be analyzed
[2025-07-20T11:48:40.612Z] 11:48:40.478 INFO  SCM Publisher 1/1 source file have been analyzed (done) | time=323ms
[2025-07-20T11:48:40.612Z] 11:48:40.493 INFO  CPD Executor Calculating CPD for 1 file
[2025-07-20T11:48:40.612Z] 11:48:40.500 INFO  CPD Executor CPD calculation finished (done) | time=5ms
[2025-07-20T11:48:40.612Z] 11:48:40.507 INFO  SCM revision ID 'd64b5d117a6110b072a97197b08a8571a0314939'
[2025-07-20T11:48:40.872Z] 11:48:40.688 INFO  Analysis report generated in 179ms, dir size=259.0 kB
[2025-07-20T11:48:40.872Z] 11:48:40.709 INFO  Analysis report compressed in 19ms, zip size=39.5 kB
[2025-07-20T11:48:40.872Z] 11:48:40.781 INFO  Analysis report uploaded in 71ms
[2025-07-20T11:48:40.872Z] 11:48:40.789 INFO  ------------- Check Quality Gate status
[2025-07-20T11:48:40.872Z] 11:48:40.790 INFO  Waiting for the analysis report to be processed (max 300s)
[2025-07-20T11:48:46.135Z] 11:48:45.894 INFO  QUALITY GATE STATUS: PASSED - View details on http://sonarqube-sonarqube.jenkins.svc.cluster.local:9000/dashboard?id=flask-cicd-demo
[2025-07-20T11:48:46.135Z] 11:48:45.916 INFO  Analysis total time: 12.413 s
[2025-07-20T11:48:46.135Z] 11:48:45.922 INFO  SonarScanner Engine completed successfully
[2025-07-20T11:48:46.394Z] 11:48:46.325 INFO  EXECUTION SUCCESS
[2025-07-20T11:48:46.394Z] 11:48:46.339 INFO  Total time: 19.285s
[Pipeline] }
[Pipeline] // withSonarQubeEnv
[Pipeline] }
[Pipeline] // container
[Pipeline] }
[Pipeline] // stage
[Pipeline] stage
[Pipeline] { (Quality Gate)
[Pipeline] script
[Pipeline] {
[Pipeline] timeout
[2025-07-20T11:48:46.582Z] Timeout set to expire in 5 min 0 sec
[Pipeline] {
[Pipeline] waitForQualityGate
[2025-07-20T11:48:46.594Z] Checking status of SonarQube task '95fd5870-57af-4842-95a3-44e6a8fc0f3f' on server 'SonarQube'
[2025-07-20T11:48:46.604Z] SonarQube task '95fd5870-57af-4842-95a3-44e6a8fc0f3f' status is 'SUCCESS'
[2025-07-20T11:48:46.624Z] SonarQube task '95fd5870-57af-4842-95a3-44e6a8fc0f3f' completed. Quality gate is 'OK'
[Pipeline] }
[Pipeline] // timeout
[Pipeline] }
[Pipeline] // script
[Pipeline] }
[Pipeline] // stage
[Pipeline] stage
[Pipeline] { (Docker Image Build & Push)
[Pipeline] container
[Pipeline] {
[Pipeline] sh
[2025-07-20T11:48:47.255Z] + echo 'Building Docker image with Kaniko...'
[2025-07-20T11:48:47.255Z] Building Docker image with Kaniko...
[2025-07-20T11:48:47.255Z] + /kaniko/executor '--dockerfile=Dockerfile' '--context=dir:///home/jenkins/agent/workspace/flask-cicd-demo' '--destination=elfkid/flask-cicd-demo:20' '--destination=elfkid/flask-cicd-demo:latest' --build-arg 'APP_VERSION=20' --build-arg 'BUILD_DATE=2025-07-20T11:48:21Z' --build-arg 'VCS_REF=d64b5d1' '--cache=true' '--cache-ttl=24h' --cleanup
[2025-07-20T11:48:49.162Z] [36mINFO[0m[0001] Resolved base name python:3.9-slim to builder 
[2025-07-20T11:48:49.162Z] [36mINFO[0m[0001] Resolved base name python:3.9-slim to production 
[2025-07-20T11:48:49.162Z] [36mINFO[0m[0001] Retrieving image manifest python:3.9-slim    
[2025-07-20T11:48:49.162Z] [36mINFO[0m[0001] Retrieving image python:3.9-slim from registry index.docker.io 
[2025-07-20T11:48:51.083Z] [36mINFO[0m[0003] Retrieving image manifest python:3.9-slim    
[2025-07-20T11:48:51.083Z] [36mINFO[0m[0003] Returning cached image manifest              
[2025-07-20T11:48:51.660Z] [36mINFO[0m[0004] Retrieving image manifest python:3.9-slim    
[2025-07-20T11:48:51.660Z] [36mINFO[0m[0004] Returning cached image manifest              
[2025-07-20T11:48:51.660Z] [36mINFO[0m[0004] Retrieving image manifest python:3.9-slim    
[2025-07-20T11:48:51.660Z] [36mINFO[0m[0004] Returning cached image manifest              
[2025-07-20T11:48:51.660Z] [36mINFO[0m[0004] Built cross stage deps: map[0:[/etc/passwd /etc/group /usr/local/lib/python3.9/site-packages/ /usr/local/bin/ /app]] 
[2025-07-20T11:48:51.660Z] [36mINFO[0m[0004] Retrieving image manifest python:3.9-slim    
[2025-07-20T11:48:51.660Z] [36mINFO[0m[0004] Returning cached image manifest              
[2025-07-20T11:48:51.660Z] [36mINFO[0m[0004] Retrieving image manifest python:3.9-slim    
[2025-07-20T11:48:51.660Z] [36mINFO[0m[0004] Returning cached image manifest              
[2025-07-20T11:48:51.660Z] [36mINFO[0m[0004] Executing 0 build triggers                   
[2025-07-20T11:48:51.660Z] [36mINFO[0m[0004] Building stage 'python:3.9-slim' [idx: '0', base-idx: '-1'] 
[2025-07-20T11:48:51.660Z] [36mINFO[0m[0004] Applying label maintainer=DevOps Team        
[2025-07-20T11:48:51.660Z] [36mINFO[0m[0004] Applying label version=20                    
[2025-07-20T11:48:51.660Z] [36mINFO[0m[0004] Applying label build-date=2025-07-20T11:48:21Z 
[2025-07-20T11:48:51.660Z] [36mINFO[0m[0004] Applying label vcs-ref=d64b5d1               
[2025-07-20T11:48:51.661Z] [36mINFO[0m[0004] Applying label description=Flask CI/CD Demo Application 
[2025-07-20T11:48:51.661Z] [36mINFO[0m[0004] Applying label org.opencontainers.image.title=Flask CI/CD Demo 
[2025-07-20T11:48:51.661Z] [36mINFO[0m[0004] Applying label org.opencontainers.image.version=20 
[2025-07-20T11:48:51.661Z] [36mINFO[0m[0004] Applying label org.opencontainers.image.description=Simple Flask application for Jenkins CI/CD pipeline demonstration 
[2025-07-20T11:48:51.661Z] [36mINFO[0m[0004] Checking for cached layer index.docker.io/elfkid/flask-cicd-demo/cache:0a759239685dc9e7e56071f9e88c2c3e737bacbfbe45387d82bcaea23b6d383b... 
[2025-07-20T11:48:54.212Z] [36mINFO[0m[0006] No cached layer found for cmd RUN groupadd -r appgroup && useradd -r -g appgroup appuser 
[2025-07-20T11:48:54.212Z] [36mINFO[0m[0006] Unpacking rootfs as cmd RUN groupadd -r appgroup && useradd -r -g appgroup appuser requires it. 
[2025-07-20T11:48:56.724Z] [36mINFO[0m[0009] ARG APP_VERSION=1.0.0                        
[2025-07-20T11:48:56.724Z] [36mINFO[0m[0009] No files changed in this command, skipping snapshotting. 
[2025-07-20T11:48:56.724Z] [36mINFO[0m[0009] ARG BUILD_DATE                               
[2025-07-20T11:48:56.724Z] [36mINFO[0m[0009] No files changed in this command, skipping snapshotting. 
[2025-07-20T11:48:56.724Z] [36mINFO[0m[0009] ARG VCS_REF                                  
[2025-07-20T11:48:56.724Z] [36mINFO[0m[0009] No files changed in this command, skipping snapshotting. 
[2025-07-20T11:48:56.724Z] [36mINFO[0m[0009] ENV PYTHONDONTWRITEBYTECODE=1     PYTHONUNBUFFERED=1     PIP_NO_CACHE_DIR=1     PIP_DISABLE_PIP_VERSION_CHECK=1 
[2025-07-20T11:48:56.724Z] [36mINFO[0m[0009] No files changed in this command, skipping snapshotting. 
[2025-07-20T11:48:56.724Z] [36mINFO[0m[0009] LABEL maintainer="DevOps Team"       version="${APP_VERSION}"       build-date="${BUILD_DATE}"       vcs-ref="${VCS_REF}"       description="Flask CI/CD Demo Application"       org.opencontainers.image.title="Flask CI/CD Demo"       org.opencontainers.image.version="${APP_VERSION}"       org.opencontainers.image.description="Simple Flask application for Jenkins CI/CD pipeline demonstration" 
[2025-07-20T11:48:56.724Z] [36mINFO[0m[0009] Applying label maintainer=DevOps Team        
[2025-07-20T11:48:56.724Z] [36mINFO[0m[0009] Applying label version=20                    
[2025-07-20T11:48:56.724Z] [36mINFO[0m[0009] Applying label build-date=2025-07-20T11:48:21Z 
[2025-07-20T11:48:56.724Z] [36mINFO[0m[0009] Applying label vcs-ref=d64b5d1               
[2025-07-20T11:48:56.724Z] [36mINFO[0m[0009] Applying label description=Flask CI/CD Demo Application 
[2025-07-20T11:48:56.724Z] [36mINFO[0m[0009] Applying label org.opencontainers.image.title=Flask CI/CD Demo 
[2025-07-20T11:48:56.724Z] [36mINFO[0m[0009] Applying label org.opencontainers.image.version=20 
[2025-07-20T11:48:56.724Z] [36mINFO[0m[0009] Applying label org.opencontainers.image.description=Simple Flask application for Jenkins CI/CD pipeline demonstration 
[2025-07-20T11:48:56.724Z] [36mINFO[0m[0009] No files changed in this command, skipping snapshotting. 
[2025-07-20T11:48:56.724Z] [36mINFO[0m[0009] RUN groupadd -r appgroup && useradd -r -g appgroup appuser 
[2025-07-20T11:48:56.724Z] [36mINFO[0m[0009] Initializing snapshotter ...                 
[2025-07-20T11:48:56.724Z] [36mINFO[0m[0009] Taking snapshot of full filesystem...        
[2025-07-20T11:48:56.724Z] [36mINFO[0m[0009] Cmd: /bin/sh                                 
[2025-07-20T11:48:56.724Z] [36mINFO[0m[0009] Args: [-c groupadd -r appgroup && useradd -r -g appgroup appuser] 
[2025-07-20T11:48:56.725Z] [36mINFO[0m[0009] Running: [/bin/sh -c groupadd -r appgroup && useradd -r -g appgroup appuser] 
[2025-07-20T11:48:56.725Z] [36mINFO[0m[0009] Taking snapshot of full filesystem...        
[2025-07-20T11:48:56.977Z] [36mINFO[0m[0009] Pushing layer index.docker.io/elfkid/flask-cicd-demo/cache:0a759239685dc9e7e56071f9e88c2c3e737bacbfbe45387d82bcaea23b6d383b to cache now 
[2025-07-20T11:48:56.977Z] [36mINFO[0m[0009] Pushing image to index.docker.io/elfkid/flask-cicd-demo/cache:0a759239685dc9e7e56071f9e88c2c3e737bacbfbe45387d82bcaea23b6d383b 
[2025-07-20T11:48:56.977Z] [36mINFO[0m[0009] WORKDIR /app                                 
[2025-07-20T11:48:56.977Z] [36mINFO[0m[0009] Cmd: workdir                                 
[2025-07-20T11:48:56.977Z] [36mINFO[0m[0009] Changed working directory to /app            
[2025-07-20T11:48:56.977Z] [36mINFO[0m[0009] Creating directory /app with uid -1 and gid -1 
[2025-07-20T11:48:56.977Z] [36mINFO[0m[0009] Taking snapshot of files...                  
[2025-07-20T11:48:56.977Z] [36mINFO[0m[0009] COPY requirements.txt .                      
[2025-07-20T11:48:56.977Z] [36mINFO[0m[0009] Taking snapshot of files...                  
[2025-07-20T11:48:56.977Z] [36mINFO[0m[0009] RUN pip install --no-cache-dir -r requirements.txt 
[2025-07-20T11:48:56.977Z] [36mINFO[0m[0009] Cmd: /bin/sh                                 
[2025-07-20T11:48:56.977Z] [36mINFO[0m[0009] Args: [-c pip install --no-cache-dir -r requirements.txt] 
[2025-07-20T11:48:56.977Z] [36mINFO[0m[0009] Running: [/bin/sh -c pip install --no-cache-dir -r requirements.txt] 
[2025-07-20T11:48:57.540Z] Collecting Flask==2.3.3
[2025-07-20T11:48:57.540Z]   Downloading flask-2.3.3-py3-none-any.whl (96 kB)
[2025-07-20T11:48:57.540Z]      â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” 96.1/96.1 kB 11.0 MB/s eta 0:00:00
[2025-07-20T11:48:57.540Z] Collecting Werkzeug==2.3.7
[2025-07-20T11:48:57.797Z]   Downloading werkzeug-2.3.7-py3-none-any.whl (242 kB)
[2025-07-20T11:48:57.797Z]      â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” 242.2/242.2 kB 36.3 MB/s eta 0:00:00
[2025-07-20T11:48:57.797Z] Collecting pytest==7.4.2
[2025-07-20T11:48:57.797Z]   Downloading pytest-7.4.2-py3-none-any.whl (324 kB)
[2025-07-20T11:48:57.797Z]      â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” 324.5/324.5 kB 80.9 MB/s eta 0:00:00
[2025-07-20T11:48:57.797Z] Collecting pytest-flask==1.2.0
[2025-07-20T11:48:57.797Z]   Downloading pytest_flask-1.2.0-py3-none-any.whl (10 kB)
[2025-07-20T11:48:57.797Z] Collecting pytest-cov==4.1.0
[2025-07-20T11:48:57.797Z]   Downloading pytest_cov-4.1.0-py3-none-any.whl (21 kB)
[2025-07-20T11:48:57.797Z] Collecting requests==2.31.0
[2025-07-20T11:48:57.797Z]   Downloading requests-2.31.0-py3-none-any.whl (62 kB)
[2025-07-20T11:48:57.797Z]      â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” 62.6/62.6 kB 105.1 MB/s eta 0:00:00
[2025-07-20T11:48:57.797Z] Collecting blinker>=1.6.2
[2025-07-20T11:48:57.797Z]   Downloading blinker-1.9.0-py3-none-any.whl (8.5 kB)
[2025-07-20T11:48:57.797Z] Collecting itsdangerous>=2.1.2
[2025-07-20T11:48:57.797Z]   Downloading itsdangerous-2.2.0-py3-none-any.whl (16 kB)
[2025-07-20T11:48:57.797Z] Collecting importlib-metadata>=3.6.0
[2025-07-20T11:48:57.797Z]   Downloading importlib_metadata-8.7.0-py3-none-any.whl (27 kB)
[2025-07-20T11:48:57.797Z] Collecting Jinja2>=3.1.2
[2025-07-20T11:48:57.797Z]   Downloading jinja2-3.1.6-py3-none-any.whl (134 kB)
[2025-07-20T11:48:57.797Z]      â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” 134.9/134.9 kB 76.9 MB/s eta 0:00:00
[2025-07-20T11:48:58.055Z] Collecting click>=8.1.3
[2025-07-20T11:48:58.055Z]   Downloading click-8.1.8-py3-none-any.whl (98 kB)
[2025-07-20T11:48:58.055Z]      â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” 98.2/98.2 kB 49.5 MB/s eta 0:00:00
[2025-07-20T11:48:58.055Z] Collecting MarkupSafe>=2.1.1
[2025-07-20T11:48:58.055Z]   Downloading MarkupSafe-3.0.2-cp39-cp39-manylinux_2_17_aarch64.manylinux2014_aarch64.whl (21 kB)
[2025-07-20T11:48:58.055Z] Collecting pluggy<2.0,>=0.12
[2025-07-20T11:48:58.055Z]   Downloading pluggy-1.6.0-py3-none-any.whl (20 kB)
[2025-07-20T11:48:58.055Z] Collecting packaging
[2025-07-20T11:48:58.055Z]   Downloading packaging-25.0-py3-none-any.whl (66 kB)
[2025-07-20T11:48:58.055Z]      â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” 66.5/66.5 kB 592.9 MB/s eta 0:00:00
[2025-07-20T11:48:58.055Z] Collecting iniconfig
[2025-07-20T11:48:58.055Z]   Downloading iniconfig-2.1.0-py3-none-any.whl (6.0 kB)
[2025-07-20T11:48:58.055Z] Collecting tomli>=1.0.0
[2025-07-20T11:48:58.055Z]   Downloading tomli-2.2.1-py3-none-any.whl (14 kB)
[2025-07-20T11:48:58.055Z] Collecting exceptiongroup>=1.0.0rc8
[2025-07-20T11:48:58.055Z]   Downloading exceptiongroup-1.3.0-py3-none-any.whl (16 kB)
[2025-07-20T11:48:58.310Z] Collecting coverage[toml]>=5.2.1
[2025-07-20T11:48:58.563Z]   Downloading coverage-7.9.2-cp39-cp39-manylinux_2_17_aarch64.manylinux2014_aarch64.whl (241 kB)
[2025-07-20T11:48:58.563Z]      â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” 241.2/241.2 kB 50.0 MB/s eta 0:00:00
[2025-07-20T11:48:58.563Z] Collecting charset-normalizer<4,>=2
[2025-07-20T11:48:58.563Z]   Downloading charset_normalizer-3.4.2-cp39-cp39-manylinux_2_17_aarch64.manylinux2014_aarch64.whl (144 kB)
[2025-07-20T11:48:58.563Z]      â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” 144.7/144.7 kB 65.6 MB/s eta 0:00:00
[2025-07-20T11:48:58.563Z] Collecting urllib3<3,>=1.21.1
[2025-07-20T11:48:58.563Z]   Downloading urllib3-2.5.0-py3-none-any.whl (129 kB)
[2025-07-20T11:48:58.563Z]      â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” 129.8/129.8 kB 72.1 MB/s eta 0:00:00
[2025-07-20T11:48:58.563Z] Collecting certifi>=2017.4.17
[2025-07-20T11:48:58.563Z]   Downloading certifi-2025.7.14-py3-none-any.whl (162 kB)
[2025-07-20T11:48:58.563Z]      â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” 162.7/162.7 kB 84.7 MB/s eta 0:00:00
[2025-07-20T11:48:58.563Z] Collecting idna<4,>=2.5
[2025-07-20T11:48:58.563Z]   Downloading idna-3.10-py3-none-any.whl (70 kB)
[2025-07-20T11:48:58.563Z]      â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” 70.4/70.4 kB 156.7 MB/s eta 0:00:00
[2025-07-20T11:48:58.563Z] Collecting typing-extensions>=4.6.0
[2025-07-20T11:48:58.563Z]   Downloading typing_extensions-4.14.1-py3-none-any.whl (43 kB)
[2025-07-20T11:48:58.563Z]      â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” 43.9/43.9 kB 415.8 MB/s eta 0:00:00
[2025-07-20T11:48:58.563Z] Collecting zipp>=3.20
[2025-07-20T11:48:58.563Z]   Downloading zipp-3.23.0-py3-none-any.whl (10 kB)
[2025-07-20T11:48:58.816Z] Installing collected packages: zipp, urllib3, typing-extensions, tomli, pluggy, packaging, MarkupSafe, itsdangerous, iniconfig, idna, coverage, click, charset-normalizer, certifi, blinker, Werkzeug, requests, Jinja2, importlib-metadata, exceptiongroup, pytest, Flask, pytest-flask, pytest-cov
[2025-07-20T11:48:59.372Z] Successfully installed Flask-2.3.3 Jinja2-3.1.6 MarkupSafe-3.0.2 Werkzeug-2.3.7 blinker-1.9.0 certifi-2025.7.14 charset-normalizer-3.4.2 click-8.1.8 coverage-7.9.2 exceptiongroup-1.3.0 idna-3.10 importlib-metadata-8.7.0 iniconfig-2.1.0 itsdangerous-2.2.0 packaging-25.0 pluggy-1.6.0 pytest-7.4.2 pytest-cov-4.1.0 pytest-flask-1.2.0 requests-2.31.0 tomli-2.2.1 typing-extensions-4.14.1 urllib3-2.5.0 zipp-3.23.0
[2025-07-20T11:48:59.372Z] WARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager. It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv
[2025-07-20T11:48:59.372Z] [36mINFO[0m[0012] Taking snapshot of full filesystem...        
[2025-07-20T11:48:59.626Z] [36mINFO[0m[0012] COPY app.py .                                
[2025-07-20T11:48:59.626Z] [36mINFO[0m[0012] Pushing layer index.docker.io/elfkid/flask-cicd-demo/cache:8ac83369c96c077c31d78959cc8a0459619fadcb1db53746f361d2930c2fbc6f to cache now 
[2025-07-20T11:48:59.626Z] [36mINFO[0m[0012] Pushing image to index.docker.io/elfkid/flask-cicd-demo/cache:8ac83369c96c077c31d78959cc8a0459619fadcb1db53746f361d2930c2fbc6f 
[2025-07-20T11:48:59.626Z] [36mINFO[0m[0012] Taking snapshot of files...                  
[2025-07-20T11:48:59.626Z] [36mINFO[0m[0012] RUN mkdir -p /app/logs &&     chown -R appuser:appgroup /app 
[2025-07-20T11:48:59.626Z] [36mINFO[0m[0012] Cmd: /bin/sh                                 
[2025-07-20T11:48:59.626Z] [36mINFO[0m[0012] Args: [-c mkdir -p /app/logs &&     chown -R appuser:appgroup /app] 
[2025-07-20T11:48:59.626Z] [36mINFO[0m[0012] Running: [/bin/sh -c mkdir -p /app/logs &&     chown -R appuser:appgroup /app] 
[2025-07-20T11:48:59.626Z] [36mINFO[0m[0012] Taking snapshot of full filesystem...        
[2025-07-20T11:48:59.898Z] [36mINFO[0m[0012] Pushing layer index.docker.io/elfkid/flask-cicd-demo/cache:4cc26a917f95b5aa821f0d81b49270deff0077c35530bcd9da66a96e68e2aa51 to cache now 
[2025-07-20T11:48:59.898Z] [36mINFO[0m[0012] Pushing image to index.docker.io/elfkid/flask-cicd-demo/cache:4cc26a917f95b5aa821f0d81b49270deff0077c35530bcd9da66a96e68e2aa51 
[2025-07-20T11:49:01.804Z] [33mWARN[0m[0014] Error uploading layer to cache: failed to push to destination index.docker.io/elfkid/flask-cicd-demo/cache:0a759239685dc9e7e56071f9e88c2c3e737bacbfbe45387d82bcaea23b6d383b: HEAD https://index.docker.io/v2/elfkid/flask-cicd-demo/cache/manifests/0a759239685dc9e7e56071f9e88c2c3e737bacbfbe45387d82bcaea23b6d383b: unexpected status code 401 Unauthorized (HEAD responses have no body, use GET for details) 
[2025-07-20T11:49:01.804Z] [36mINFO[0m[0014] Saving file usr/local/lib/python3.9/site-packages for later use 
[2025-07-20T11:49:01.804Z] [36mINFO[0m[0014] Saving file usr/local/bin for later use      
[2025-07-20T11:49:01.805Z] [36mINFO[0m[0014] Saving file app for later use                
[2025-07-20T11:49:01.805Z] [36mINFO[0m[0014] Saving file etc/passwd for later use         
[2025-07-20T11:49:01.805Z] [36mINFO[0m[0014] Saving file etc/group for later use          
[2025-07-20T11:49:01.805Z] [36mINFO[0m[0014] Deleting filesystem...                       
[2025-07-20T11:49:01.805Z] [36mINFO[0m[0014] Retrieving image manifest python:3.9-slim    
[2025-07-20T11:49:01.805Z] [36mINFO[0m[0014] Returning cached image manifest              
[2025-07-20T11:49:01.805Z] [36mINFO[0m[0014] Retrieving image manifest python:3.9-slim    
[2025-07-20T11:49:01.805Z] [36mINFO[0m[0014] Returning cached image manifest              
[2025-07-20T11:49:01.805Z] [36mINFO[0m[0014] Executing 0 build triggers                   
[2025-07-20T11:49:01.805Z] [36mINFO[0m[0014] Building stage 'python:3.9-slim' [idx: '1', base-idx: '-1'] 
[2025-07-20T11:49:02.065Z] [36mINFO[0m[0014] Cmd: USER                                    
[2025-07-20T11:49:02.065Z] [36mINFO[0m[0014] Cmd: EXPOSE                                  
[2025-07-20T11:49:02.065Z] [36mINFO[0m[0014] Adding exposed port: 5000/tcp                
[2025-07-20T11:49:02.065Z] [36mINFO[0m[0014] Unpacking rootfs as cmd COPY --from=builder /etc/passwd /etc/passwd requires it. 
[2025-07-20T11:49:04.633Z] [36mINFO[0m[0017] ENV PYTHONDONTWRITEBYTECODE=1     PYTHONUNBUFFERED=1     FLASK_APP=app.py     FLASK_ENV=production     APP_VERSION=${APP_VERSION:-1.0.0}     ENVIRONMENT=production     PORT=5000 
[2025-07-20T11:49:04.633Z] [36mINFO[0m[0017] No files changed in this command, skipping snapshotting. 
[2025-07-20T11:49:04.633Z] [36mINFO[0m[0017] COPY --from=builder /etc/passwd /etc/passwd  
[2025-07-20T11:49:04.633Z] [36mINFO[0m[0017] Taking snapshot of files...                  
[2025-07-20T11:49:04.633Z] [36mINFO[0m[0017] COPY --from=builder /etc/group /etc/group    
[2025-07-20T11:49:04.633Z] [36mINFO[0m[0017] Taking snapshot of files...                  
[2025-07-20T11:49:04.633Z] [36mINFO[0m[0017] WORKDIR /app                                 
[2025-07-20T11:49:04.633Z] [36mINFO[0m[0017] Cmd: workdir                                 
[2025-07-20T11:49:04.633Z] [36mINFO[0m[0017] Changed working directory to /app            
[2025-07-20T11:49:04.633Z] [36mINFO[0m[0017] Creating directory /app with uid -1 and gid -1 
[2025-07-20T11:49:04.633Z] [36mINFO[0m[0017] Taking snapshot of files...                  
[2025-07-20T11:49:04.633Z] [36mINFO[0m[0017] COPY --from=builder /usr/local/lib/python3.9/site-packages/ /usr/local/lib/python3.9/site-packages/ 
[2025-07-20T11:49:04.633Z] [36mINFO[0m[0017] Taking snapshot of files...                  
[2025-07-20T11:49:04.892Z] [36mINFO[0m[0017] COPY --from=builder /usr/local/bin/ /usr/local/bin/ 
[2025-07-20T11:49:04.892Z] [36mINFO[0m[0017] Taking snapshot of files...                  
[2025-07-20T11:49:04.892Z] [36mINFO[0m[0017] COPY --from=builder --chown=appuser:appgroup /app . 
[2025-07-20T11:49:04.892Z] [36mINFO[0m[0017] Taking snapshot of files...                  
[2025-07-20T11:49:04.892Z] [36mINFO[0m[0017] USER appuser                                 
[2025-07-20T11:49:04.892Z] [36mINFO[0m[0017] Cmd: USER                                    
[2025-07-20T11:49:04.892Z] [36mINFO[0m[0017] No files changed in this command, skipping snapshotting. 
[2025-07-20T11:49:04.892Z] [36mINFO[0m[0017] EXPOSE 5000                                  
[2025-07-20T11:49:04.892Z] [36mINFO[0m[0017] Cmd: EXPOSE                                  
[2025-07-20T11:49:04.892Z] [36mINFO[0m[0017] Adding exposed port: 5000/tcp                
[2025-07-20T11:49:04.892Z] [36mINFO[0m[0017] No files changed in this command, skipping snapshotting. 
[2025-07-20T11:49:04.892Z] [36mINFO[0m[0017] HEALTHCHECK --interval=30s --timeout=3s --start-period=5s --retries=3     CMD python -c "import requests; requests.get('http://localhost:5000/health')" || exit 1 
[2025-07-20T11:49:04.892Z] [36mINFO[0m[0017] No files changed in this command, skipping snapshotting. 
[2025-07-20T11:49:04.892Z] [36mINFO[0m[0017] CMD ["python", "app.py"]                     
[2025-07-20T11:49:04.892Z] [36mINFO[0m[0017] No files changed in this command, skipping snapshotting. 
[2025-07-20T11:49:04.892Z] [36mINFO[0m[0017] Deleting filesystem...                       
[2025-07-20T11:49:04.892Z] [36mINFO[0m[0017] Pushing image to elfkid/flask-cicd-demo:20   
[2025-07-20T11:49:13.047Z] [36mINFO[0m[0024] Pushed index.docker.io/elfkid/flask-cicd-demo@sha256:ec8ce5656c4f5ba5d4392cd52bed6ddab00a30c975007599bd8030aa7d30b1e3 
[2025-07-20T11:49:13.048Z] [36mINFO[0m[0024] Pushing image to elfkid/flask-cicd-demo:latest 
[2025-07-20T11:49:18.314Z] [36mINFO[0m[0030] Pushed index.docker.io/elfkid/flask-cicd-demo@sha256:ec8ce5656c4f5ba5d4392cd52bed6ddab00a30c975007599bd8030aa7d30b1e3 
[2025-07-20T11:49:18.314Z] + echo 'Image: elfkid/flask-cicd-demo:20'
[2025-07-20T11:49:18.314Z] Image: elfkid/flask-cicd-demo:20
[Pipeline] }
[Pipeline] // container
[Pipeline] }
[Pipeline] // stage
[Pipeline] stage
[Pipeline] { (Helm Chart Lint)
[Pipeline] container
[Pipeline] {
[Pipeline] sh
[2025-07-20T11:49:18.967Z] + helm lint helm/flask-chart
[2025-07-20T11:49:18.967Z] ==> Linting helm/flask-chart
[2025-07-20T11:49:18.967Z] [INFO] Chart.yaml: icon is recommended
[2025-07-20T11:49:18.967Z] 
[2025-07-20T11:49:18.967Z] 1 chart(s) linted, 0 chart(s) failed
[2025-07-20T11:49:18.967Z] + helm template flask-chart helm/flask-chart --set 'image.repository=elfkid/flask-cicd-demo' --set 'image.tag=20' --set 'appVersion=20' --dry-run --debug
[2025-07-20T11:49:18.967Z] install.go:200: [debug] Original chart version: ""
[2025-07-20T11:49:18.967Z] install.go:217: [debug] CHART PATH: /home/jenkins/agent/workspace/flask-cicd-demo/helm/flask-chart
[2025-07-20T11:49:18.967Z] 
[2025-07-20T11:49:18.967Z] ---
[2025-07-20T11:49:18.967Z] # Source: flask-chart/templates/serviceaccount.yaml
[2025-07-20T11:49:18.967Z] apiVersion: v1
[2025-07-20T11:49:18.967Z] kind: ServiceAccount
[2025-07-20T11:49:18.967Z] metadata:
[2025-07-20T11:49:18.967Z]   name: flask-chart
[2025-07-20T11:49:18.967Z]   labels:
[2025-07-20T11:49:18.967Z]     helm.sh/chart: flask-chart-0.1.0
[2025-07-20T11:49:18.967Z]     app.kubernetes.io/name: flask-chart
[2025-07-20T11:49:18.967Z]     app.kubernetes.io/instance: flask-chart
[2025-07-20T11:49:18.967Z]     app: flask-cicd-demo
[2025-07-20T11:49:18.967Z]     app.kubernetes.io/version: "1.0.0"
[2025-07-20T11:49:18.967Z]     app.kubernetes.io/managed-by: Helm
[2025-07-20T11:49:18.967Z]     app.kubernetes.io/part-of: flask-cicd-demo
[2025-07-20T11:49:18.967Z] ---
[2025-07-20T11:49:18.967Z] # Source: flask-chart/templates/configmap.yaml
[2025-07-20T11:49:18.967Z] apiVersion: v1
[2025-07-20T11:49:18.967Z] kind: ConfigMap
[2025-07-20T11:49:18.967Z] metadata:
[2025-07-20T11:49:18.967Z]   name: flask-chart-config
[2025-07-20T11:49:18.967Z]   labels:
[2025-07-20T11:49:18.967Z]     helm.sh/chart: flask-chart-0.1.0
[2025-07-20T11:49:18.967Z]     app.kubernetes.io/name: flask-chart
[2025-07-20T11:49:18.967Z]     app.kubernetes.io/instance: flask-chart
[2025-07-20T11:49:18.967Z]     app: flask-cicd-demo
[2025-07-20T11:49:18.967Z]     app.kubernetes.io/version: "1.0.0"
[2025-07-20T11:49:18.967Z]     app.kubernetes.io/managed-by: Helm
[2025-07-20T11:49:18.967Z]     app.kubernetes.io/part-of: flask-cicd-demo
[2025-07-20T11:49:18.967Z] data:
[2025-07-20T11:49:18.967Z]     APP_NAME: "flask-cicd-demo"
[2025-07-20T11:49:18.967Z]     ENVIRONMENT: "production"
[2025-07-20T11:49:18.967Z]     LOG_LEVEL: "INFO"
[2025-07-20T11:49:18.967Z] ---
[2025-07-20T11:49:18.967Z] # Source: flask-chart/templates/service.yaml
[2025-07-20T11:49:18.967Z] apiVersion: v1
[2025-07-20T11:49:18.967Z] kind: Service
[2025-07-20T11:49:18.967Z] metadata:
[2025-07-20T11:49:18.967Z]   name: flask-chart
[2025-07-20T11:49:18.967Z]   labels:
[2025-07-20T11:49:18.967Z]     helm.sh/chart: flask-chart-0.1.0
[2025-07-20T11:49:18.967Z]     app.kubernetes.io/name: flask-chart
[2025-07-20T11:49:18.967Z]     app.kubernetes.io/instance: flask-chart
[2025-07-20T11:49:18.967Z]     app: flask-cicd-demo
[2025-07-20T11:49:18.967Z]     app.kubernetes.io/version: "1.0.0"
[2025-07-20T11:49:18.967Z]     app.kubernetes.io/managed-by: Helm
[2025-07-20T11:49:18.967Z]     app.kubernetes.io/part-of: flask-cicd-demo
[2025-07-20T11:49:18.967Z] spec:
[2025-07-20T11:49:18.967Z]   type: ClusterIP
[2025-07-20T11:49:18.967Z]   ports:
[2025-07-20T11:49:18.967Z]     - port: 80
[2025-07-20T11:49:18.967Z]       targetPort: 5000
[2025-07-20T11:49:18.967Z]       protocol: TCP
[2025-07-20T11:49:18.967Z]       name: http
[2025-07-20T11:49:18.967Z]   selector:
[2025-07-20T11:49:18.967Z]     app.kubernetes.io/name: flask-chart
[2025-07-20T11:49:18.967Z]     app.kubernetes.io/instance: flask-chart
[2025-07-20T11:49:18.968Z]     app: flask-cicd-demo
[2025-07-20T11:49:18.968Z] ---
[2025-07-20T11:49:18.968Z] # Source: flask-chart/templates/deployment.yaml
[2025-07-20T11:49:18.968Z] apiVersion: apps/v1
[2025-07-20T11:49:18.968Z] kind: Deployment
[2025-07-20T11:49:18.968Z] metadata:
[2025-07-20T11:49:18.968Z]   name: flask-chart
[2025-07-20T11:49:18.968Z]   labels:
[2025-07-20T11:49:18.968Z]     helm.sh/chart: flask-chart-0.1.0
[2025-07-20T11:49:18.968Z]     app.kubernetes.io/name: flask-chart
[2025-07-20T11:49:18.968Z]     app.kubernetes.io/instance: flask-chart
[2025-07-20T11:49:18.968Z]     app: flask-cicd-demo
[2025-07-20T11:49:18.968Z]     app.kubernetes.io/version: "1.0.0"
[2025-07-20T11:49:18.968Z]     app.kubernetes.io/managed-by: Helm
[2025-07-20T11:49:18.968Z]     app.kubernetes.io/part-of: flask-cicd-demo
[2025-07-20T11:49:18.968Z] spec:
[2025-07-20T11:49:18.968Z]   replicas: 2
[2025-07-20T11:49:18.968Z]   strategy:
[2025-07-20T11:49:18.968Z]     type: RollingUpdate
[2025-07-20T11:49:18.968Z]     rollingUpdate:
[2025-07-20T11:49:18.968Z]       maxUnavailable: 0
[2025-07-20T11:49:18.968Z]       maxSurge: 1
[2025-07-20T11:49:18.968Z]   selector:
[2025-07-20T11:49:18.968Z]     matchLabels:
[2025-07-20T11:49:18.968Z]       app.kubernetes.io/name: flask-chart
[2025-07-20T11:49:18.968Z]       app.kubernetes.io/instance: flask-chart
[2025-07-20T11:49:18.968Z]       app: flask-cicd-demo
[2025-07-20T11:49:18.968Z]   template:
[2025-07-20T11:49:18.968Z]     metadata:
[2025-07-20T11:49:18.968Z]       annotations:
[2025-07-20T11:49:18.968Z]         checksum/config: a75c11d2515a75c44592d9fac1a3894a9c6757e89388983f6e042f72e53a6f94
[2025-07-20T11:49:18.968Z]       labels:
[2025-07-20T11:49:18.968Z]         app.kubernetes.io/name: flask-chart
[2025-07-20T11:49:18.968Z]         app.kubernetes.io/instance: flask-chart
[2025-07-20T11:49:18.968Z]         app: flask-cicd-demo
[2025-07-20T11:49:18.968Z]     spec:
[2025-07-20T11:49:18.968Z]       serviceAccountName: flask-chart
[2025-07-20T11:49:18.968Z]       securityContext:
[2025-07-20T11:49:18.968Z]         fsGroup: 2000
[2025-07-20T11:49:18.968Z]       containers:
[2025-07-20T11:49:18.968Z]         - name: flask-chart
[2025-07-20T11:49:18.968Z]           securityContext:
[2025-07-20T11:49:18.968Z]             capabilities:
[2025-07-20T11:49:18.968Z]               drop:
[2025-07-20T11:49:18.968Z]               - ALL
[2025-07-20T11:49:18.968Z]             readOnlyRootFilesystem: false
[2025-07-20T11:49:18.968Z]             runAsNonRoot: true
[2025-07-20T11:49:18.968Z]             runAsUser: 1000
[2025-07-20T11:49:18.968Z]           image: "elfkid/flask-cicd-demo:20"
[2025-07-20T11:49:18.968Z]           imagePullPolicy: IfNotPresent
[2025-07-20T11:49:18.968Z]           ports:
[2025-07-20T11:49:18.968Z]             - name: http
[2025-07-20T11:49:18.968Z]               containerPort: 5000
[2025-07-20T11:49:18.968Z]               protocol: TCP
[2025-07-20T11:49:18.968Z]           env:
[2025-07-20T11:49:18.968Z]             - name: APP_NAME
[2025-07-20T11:49:18.968Z]               value: "flask-cicd-demo"
[2025-07-20T11:49:18.968Z]             - name: APP_VERSION
[2025-07-20T11:49:18.968Z]               value: "1.0.0"
[2025-07-20T11:49:18.968Z]             - name: ENVIRONMENT
[2025-07-20T11:49:18.968Z]               value: "production"
[2025-07-20T11:49:18.968Z]             - name: PORT
[2025-07-20T11:49:18.968Z]               value: "5000"
[2025-07-20T11:49:18.968Z]             - name: FLASK_DEBUG
[2025-07-20T11:49:18.968Z]               value: "false"
[2025-07-20T11:49:18.968Z]             - name: HOSTNAME
[2025-07-20T11:49:18.968Z]               valueFrom:
[2025-07-20T11:49:18.968Z]                 fieldRef:
[2025-07-20T11:49:18.968Z]                   fieldPath: metadata.name
[2025-07-20T11:49:18.968Z]             - name: LOG_LEVEL
[2025-07-20T11:49:18.968Z]               valueFrom:
[2025-07-20T11:49:18.968Z]                 configMapKeyRef:
[2025-07-20T11:49:18.968Z]                   name: flask-chart-config
[2025-07-20T11:49:18.968Z]                   key: LOG_LEVEL
[2025-07-20T11:49:18.968Z]           livenessProbe:
[2025-07-20T11:49:18.968Z]             httpGet:
[2025-07-20T11:49:18.968Z]               path: /health
[2025-07-20T11:49:18.968Z]               port: http
[2025-07-20T11:49:18.968Z]             initialDelaySeconds: 30
[2025-07-20T11:49:18.968Z]             periodSeconds: 30
[2025-07-20T11:49:18.968Z]             timeoutSeconds: 10
[2025-07-20T11:49:18.968Z]             failureThreshold: 3
[2025-07-20T11:49:18.968Z]           readinessProbe:
[2025-07-20T11:49:18.968Z]             httpGet:
[2025-07-20T11:49:18.968Z]               path: /health
[2025-07-20T11:49:18.968Z]               port: http
[2025-07-20T11:49:18.968Z]             initialDelaySeconds: 5
[2025-07-20T11:49:18.968Z]             periodSeconds: 10
[2025-07-20T11:49:18.968Z]             timeoutSeconds: 3
[2025-07-20T11:49:18.968Z]             failureThreshold: 3
[2025-07-20T11:49:18.968Z]             successThreshold: 1
[2025-07-20T11:49:18.968Z]           resources:
[2025-07-20T11:49:18.968Z]             limits:
[2025-07-20T11:49:18.968Z]               cpu: 500m
[2025-07-20T11:49:18.968Z]               memory: 512Mi
[2025-07-20T11:49:18.968Z]             requests:
[2025-07-20T11:49:18.968Z]               cpu: 250m
[2025-07-20T11:49:18.968Z]               memory: 256Mi
[2025-07-20T11:49:18.968Z] ---
[2025-07-20T11:49:18.968Z] # Source: flask-chart/templates/tests/test-connection.yaml
[2025-07-20T11:49:18.968Z] apiVersion: v1
[2025-07-20T11:49:18.968Z] kind: Pod
[2025-07-20T11:49:18.968Z] metadata:
[2025-07-20T11:49:18.968Z]   name: "flask-chart-test-connection"
[2025-07-20T11:49:18.968Z]   labels:
[2025-07-20T11:49:18.968Z]     helm.sh/chart: flask-chart-0.1.0
[2025-07-20T11:49:18.968Z]     app.kubernetes.io/name: flask-chart
[2025-07-20T11:49:18.968Z]     app.kubernetes.io/instance: flask-chart
[2025-07-20T11:49:18.968Z]     app: flask-cicd-demo
[2025-07-20T11:49:18.968Z]     app.kubernetes.io/version: "1.0.0"
[2025-07-20T11:49:18.968Z]     app.kubernetes.io/managed-by: Helm
[2025-07-20T11:49:18.968Z]     app.kubernetes.io/part-of: flask-cicd-demo
[2025-07-20T11:49:18.968Z]   annotations:
[2025-07-20T11:49:18.968Z]     "helm.sh/hook": test
[2025-07-20T11:49:18.968Z] spec:
[2025-07-20T11:49:18.968Z]   containers:
[2025-07-20T11:49:18.968Z]     - name: wget
[2025-07-20T11:49:18.968Z]       image: busybox
[2025-07-20T11:49:18.968Z]       command: ['wget']
[2025-07-20T11:49:18.968Z]       args: ['flask-chart:80']
[2025-07-20T11:49:18.968Z]   restartPolicy: Never
[Pipeline] }
[Pipeline] // container
[Pipeline] }
[Pipeline] // stage
[Pipeline] stage
[Pipeline] { (Deploy to Kubernetes)
[Pipeline] container
[Pipeline] {
[Pipeline] sh
[2025-07-20T11:49:19.585Z] + helm dependency update helm/flask-chart
[2025-07-20T11:49:19.585Z] + helm upgrade --install flask-chart helm/flask-chart --namespace default --create-namespace --set 'image.repository=elfkid/flask-cicd-demo' --set 'image.tag=20' --set 'appVersion=20' --set 'fullnameOverride=flask-cicd-demo' --wait '--timeout=5m'
[2025-07-20T11:49:19.585Z] Release "flask-chart" does not exist. Installing it now.
[2025-07-20T11:49:46.165Z] NAME: flask-chart
[2025-07-20T11:49:46.165Z] LAST DEPLOYED: Sun Jul 20 11:49:19 2025
[2025-07-20T11:49:46.166Z] NAMESPACE: default
[2025-07-20T11:49:46.166Z] STATUS: deployed
[2025-07-20T11:49:46.166Z] REVISION: 1
[2025-07-20T11:49:46.166Z] NOTES:
[2025-07-20T11:49:46.166Z] 1. Get the application URL by running these commands:
[2025-07-20T11:49:46.166Z]   export POD_NAME=$(kubectl get pods --namespace default -l "app.kubernetes.io/name=flask-chart,app.kubernetes.io/instance=flask-chart" -o jsonpath="{.items[0].metadata.name}")
[2025-07-20T11:49:46.166Z]   export CONTAINER_PORT=$(kubectl get pod --namespace default $POD_NAME -o jsonpath="{.spec.containers[0].ports[0].containerPort}")
[2025-07-20T11:49:46.166Z]   echo "Visit http://127.0.0.1:8080 to use your application"
[2025-07-20T11:49:46.166Z]   kubectl --namespace default port-forward $POD_NAME 8080:$CONTAINER_PORT
[2025-07-20T11:49:46.166Z] + helm status flask-chart -n default
[2025-07-20T11:49:46.166Z] NAME: flask-chart
[2025-07-20T11:49:46.166Z] LAST DEPLOYED: Sun Jul 20 11:49:19 2025
[2025-07-20T11:49:46.166Z] NAMESPACE: default
[2025-07-20T11:49:46.166Z] STATUS: deployed
[2025-07-20T11:49:46.166Z] REVISION: 1
[2025-07-20T11:49:46.166Z] NOTES:
[2025-07-20T11:49:46.166Z] 1. Get the application URL by running these commands:
[2025-07-20T11:49:46.166Z]   export POD_NAME=$(kubectl get pods --namespace default -l "app.kubernetes.io/name=flask-chart,app.kubernetes.io/instance=flask-chart" -o jsonpath="{.items[0].metadata.name}")
[2025-07-20T11:49:46.166Z]   export CONTAINER_PORT=$(kubectl get pod --namespace default $POD_NAME -o jsonpath="{.spec.containers[0].ports[0].containerPort}")
[2025-07-20T11:49:46.166Z]   echo "Visit http://127.0.0.1:8080 to use your application"
[2025-07-20T11:49:46.166Z]   kubectl --namespace default port-forward $POD_NAME 8080:$CONTAINER_PORT
[Pipeline] }
[Pipeline] // container
[Pipeline] }
[Pipeline] // stage
[Pipeline] stage
[Pipeline] { (Declarative: Post Actions)
[Pipeline] archiveArtifacts
[2025-07-20T11:49:46.302Z] Archiving artifacts
[Pipeline] cleanWs
[2025-07-20T11:49:46.328Z] [WS-CLEANUP] Deleting project workspace...
[2025-07-20T11:49:46.328Z] [WS-CLEANUP] Deferred wipeout is used...
[2025-07-20T11:49:46.334Z] [WS-CLEANUP] done
[Pipeline] script
[Pipeline] {
[Pipeline] slackSend
[2025-07-20T11:49:46.372Z] Slack Send Pipeline step running, values are - baseUrl: <empty>, teamDomain: TechTest, channel: #ai, color: good, botUser: true, tokenCredentialId: slack-token, notifyCommitters: false, iconEmoji: <empty>, username: <empty>, timestamp: <empty>
[Pipeline] }
[Pipeline] // script
[Pipeline] }
[Pipeline] // stage
[Pipeline] }
[2025-07-20T11:49:47.093Z] 
[Pipeline] // ansiColor
[Pipeline] }
[Pipeline] // timestamps
[Pipeline] }
[Pipeline] // timeout
[Pipeline] }
[Pipeline] // withEnv
[Pipeline] }
[Pipeline] // withEnv
[Pipeline] }
[Pipeline] // node
[Pipeline] }
[Pipeline] // podTemplate
[Pipeline] End of Pipeline
Finished: SUCCESS
